# 第三次总结

用了差不多两周的时间完成了一个注册登录界面，勉强实现了：

输入注册信息=>判断注册信息有没有不合法的=>合法后注册信息传到后端=>后端接收注册信息并将数据与数据库中的数据比对，做出判断后传到数据库=>后端返回给一个信息（注册成功了没(￣▽￣)？）=>前端接收个信息（注册成功了[]~(￣▽￣)~*）。

然后输入登录信息=>判断登录信息有没有不合法的=>合法后登录信息传到后端=>后端接收登录信息并将数据与数据库中已有的信息比对后做出判断=>后端将判断信息传给前端（有这个人不(￣▽￣)？）=>前端接收信息（没有(ノ｀Д)ノ，那一边去）。总而言之，差不多就是这样的功能。看上去很清晰，但还是要吐槽一句“没想到区区一个注册登录居然涉及这么多东西”。

我做的时候磕磕绊绊，有好多问题不知道咋解决，于是学着大师兄去请观音菩萨，但观音菩萨却是大师兄(￣▽￣)？？

大师兄不愧是观音菩萨，有问题都由药到病除，我就在在远端前保持迷之微笑给师兄打call(￣y▽,￣)╭ 。当然，大师兄将过程都标了出来，我也学到了很多东西。

先总结一下做的过程中出现的一些（a lot of）问题，仅仅针对我这个新手而言。

首先，印象最深的是出现两次的404（not found）的问题。

第一次出现时我一直都没解决，差不多周二还是周三的时候才搞定。师兄一开始说是给ctx.body传值，但我那时对axios的功能还只能用“迷糊”二字来形容。

这里讲一下我之前的困惑，就是ctx到底是什么，我看了视频知道了req（request）和res（response），但是ctx到底是啥还是不太清楚。查了一下才知道是前后文的意思，就是既有request也有response，koa把res和req封装成了ctx对象，理解了一段时间后用起来才有些底气。

而关于axios，我一直在想的就是，它到底怎么把前端的东西传到后端，后端又是怎么接收，接收完之后又是怎么把后端的信息传到前端，前端又是怎么接收后端的信息，这些东西只有两个怎么搞，不需要四个吗？原谅我无知的想法，但我着实钻进了牛角尖。后来才明白，前端axios发一个然后response=>{xxx}收了，后端xxx=ctx.request.body收了然后ctx.body=xxx又发了，总而言之就是两段代码（不知道描述的准不准确，但现在我的认知就是这个了<( _ _ )>）。当时确实一脸懵逼。

第二次出现时是因为我的数据库的语句写错了，中间要用and而不是“，”。后来师兄又加了一个后端的错误信息提示，一有错就知道是那里出了问题。

接着，是比较复杂的异步问题。老实说，至今为止我的了解还是比较浅薄。但在我的理解中，就是代码它不是直接输出【1，2，3，4】，而是【1】，哎过了一秒，【2】，又过了一秒【3】……就是它错开了时间。我的问题是，那段代码（后端校验用的）直接就跳到后面去了，中间的判断逻辑都没有执行，于是就导致前端接收不到信息(* ￣︿￣)。后来师兄加了洋葱，不，异步，然后就好了。我得之后好好学学异步这块，还有event loop(ง •_•)ง。

然后是前端表单校验的问题。讲真的一开始确实不知道咋做，因为我早已与看的视频脱节，而且这玩意儿我第一次接触。视频的做法是在后端验证，然后输出到前端去，最后显示在页面上，我直接在前端怎么验证呢？事实上前端验证比较简单，视频中的做法却有些复杂了。前端验证是必要的，因为用户要根据提示来输入信息，总不能让人一遍不成刷新一遍再试，不仅没有效率，而且容易被打(* ￣︿￣)。没办法，只能充分发挥主观能动性来到网上面搜，找到一个差不多的开始套。不过这里出现了两个问题，一个是this的使用，一个是参数的传递问题。所幸在师兄的指导下也很快解决。又被上了一课[]~(￣▽￣)~*。

最后是后端表单校验问题，这一块我跟前端校验一样。也是有些懵逼。一方面视频中的后端校验搞得很复杂，我不想再看第二眼，另一方面还是之前提到的问题，ctx.body的传值问题，这东西咋传到前面去啊？不过还是发挥了主观能动性，找到了方法。在这里，遇到了传不过去的问题，没错，就是异步的问题。咋感觉都环环相扣嘞……

大概，最主要的就是这几个问题。这一番下来，折腾的不轻，但也看了不少相关的东西，最起码了解了前端到后端到数据库的基本流程，也算是收获颇丰。而关于这个注册登录，我还想，怎么注册成功就跳转到登录界面上，怎么登录成功就跳转到另一个界面，在这个界面上一点退出就退回到登录界面上……之类。但我感觉还是把现在这些基本的知识给学好吧，花里胡哨的到后面再学了。

再总结一下之后要学习的内容：ES6(这个没得跑)，js，然后是event loop、异步、网络……计算机深渊。

任重而道远。革命尚未成功，同志仍需努力。(ง •_•)ง

哦不，最后，格式化是shift+alt+f，我一直都按错了（；´д｀）ゞ。















